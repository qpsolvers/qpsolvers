<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Least squares" href="least-squares.html" /><link rel="prev" title="Installation" href="installation.html" />

    <!-- Generated with Sphinx 8.1.3 and Furo 2024.08.06 -->
        <title>Quadratic programming - qpsolvers 4.8.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">qpsolvers 4.8.0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">qpsolvers 4.8.0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Quadratic programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="least-squares.html">Least squares</a></li>
<li class="toctree-l1"><a class="reference internal" href="supported-solvers.html">Supported solvers</a></li>
<li class="toctree-l1"><a class="reference internal" href="unsupported-solvers.html">Unsupported solvers</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer-notes.html">Developer notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="_sources/quadratic-programming.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="quadratic-programming">
<span id="id1"></span><h1>Quadratic programming<a class="headerlink" href="#quadratic-programming" title="Link to this heading">¶</a></h1>
<section id="primal-problem">
<h2>Primal problem<a class="headerlink" href="#primal-problem" title="Link to this heading">¶</a></h2>
<p>A quadratic program is defined in standard form as:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\begin{split}\begin{split}\begin{array}{ll}
    \underset{x}{\mbox{minimize}} &amp;
        \frac{1}{2} x^T P x + q^T x \\
    \mbox{subject to}
        &amp; G x \leq h                \\
        &amp; A x = b                   \\
        &amp; lb \leq x \leq ub
\end{array}\end{split}\end{split}\]</div>
</div>
<p>The vectors <span class="math notranslate nohighlight">\(lb\)</span> and <span class="math notranslate nohighlight">\(ub\)</span> can contain <span class="math notranslate nohighlight">\(\pm \infty\)</span> values to
disable bounds on some coordinates. To solve such a problem, build the matrices
that define it and call the <a class="reference internal" href="#qpsolvers.solve_qp" title="qpsolvers.solve_qp"><code class="xref py py-func docutils literal notranslate"><span class="pre">solve_qp()</span></code></a> function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="kn">import</span> <span class="n">array</span><span class="p">,</span> <span class="n">dot</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qpsolvers</span><span class="w"> </span><span class="kn">import</span> <span class="n">solve_qp</span>

<span class="n">M</span> <span class="o">=</span> <span class="n">array</span><span class="p">([[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">8.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">]])</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">M</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">M</span><span class="p">)</span>  <span class="c1"># quick way to build a symmetric matrix</span>
<span class="n">q</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">array</span><span class="p">([</span><span class="mf">3.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">]),</span> <span class="n">M</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,))</span>
<span class="n">G</span> <span class="o">=</span> <span class="n">array</span><span class="p">([[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.</span><span class="p">]])</span>
<span class="n">h</span> <span class="o">=</span> <span class="n">array</span><span class="p">([</span><span class="mf">3.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.</span><span class="p">])</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,))</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">array</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">])</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">array</span><span class="p">([</span><span class="mf">1.</span><span class="p">])</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">solve_qp</span><span class="p">(</span><span class="n">P</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">G</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="s2">&quot;osqp&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;QP solution: x = </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The backend QP solver is selected among <a class="reference internal" href="supported-solvers.html#supported-solvers"><span class="std std-ref">supported solvers</span></a> via the <code class="docutils literal notranslate"><span class="pre">solver</span></code> keyword argument. This example outputs the
solution <code class="docutils literal notranslate"><span class="pre">[0.30769231,</span> <span class="pre">-0.69230769,</span>&#160; <span class="pre">1.38461538]</span></code>.</p>
<dl class="py function">
<dt class="sig sig-object py" id="qpsolvers.solve_qp">
<span class="sig-prename descclassname"><span class="pre">qpsolvers.</span></span><span class="sig-name descname"><span class="pre">solve_qp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">P</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">G</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">h</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">A</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ub</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solver</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initvals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qpsolvers.solve_qp" title="Link to this definition">¶</a></dt>
<dd><p>Solve a quadratic program.</p>
<p>The quadratic program is defined as:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\begin{split}\begin{split}\begin{array}{ll}
    \underset{x}{\mbox{minimize}} &amp;
        \frac{1}{2} x^T P x + q^T x \\
    \mbox{subject to}
        &amp; G x \leq h                \\
        &amp; A x = b                   \\
        &amp; lb \leq x \leq ub
\end{array}\end{split}\end{split}\]</div>
</div>
<p>using the QP solver selected by the <code class="docutils literal notranslate"><span class="pre">solver</span></code> keyword argument.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>P</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">csc_matrix</span></code>]</span>) – Symmetric cost matrix (most solvers require it to be definite as well).</p></li>
<li><p><strong>q</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></span>) – Cost vector.</p></li>
<li><p><strong>G</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">csc_matrix</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]</span>) – Linear inequality matrix.</p></li>
<li><p><strong>h</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</span>) – Linear inequality vector.</p></li>
<li><p><strong>A</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">csc_matrix</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]</span>) – Linear equality matrix.</p></li>
<li><p><strong>b</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</span>) – Linear equality vector.</p></li>
<li><p><strong>lb</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</span>) – Lower bound constraint vector. Can contain <code class="docutils literal notranslate"><span class="pre">-np.inf</span></code>.</p></li>
<li><p><strong>ub</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</span>) – Upper bound constraint vector. Can contain <code class="docutils literal notranslate"><span class="pre">+np.inf</span></code>.</p></li>
<li><p><strong>solver</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</span>) – Name of the QP solver, to choose in
<a class="reference internal" href="supported-solvers.html#qpsolvers.available_solvers" title="qpsolvers.available_solvers"><code class="xref py py-data docutils literal notranslate"><span class="pre">qpsolvers.available_solvers</span></code></a>. This argument is mandatory.</p></li>
<li><p><strong>initvals</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</span>) – Primal candidate vector <span class="math notranslate nohighlight">\(x\)</span> values used to warm-start the solver.</p></li>
<li><p><strong>verbose</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></span>) – Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to print out extra information.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In quadratic programming, the matrix <span class="math notranslate nohighlight">\(P\)</span> should be symmetric. Many
solvers (including CVXOPT, OSQP and quadprog) leverage this property and
may return unintended results when it is not the case. You can set
project <span class="math notranslate nohighlight">\(P\)</span> on its symmetric part by:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">P</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">P</span> <span class="o">+</span> <span class="n">P</span><span class="o">.</span><span class="n">transpose</span><span class="p">())</span>
</pre></div>
</div>
<p>Some solvers (like quadprog) will further require that <span class="math notranslate nohighlight">\(P\)</span> is
definite, while other solvers (like ProxQP or QPALM) can work with
semi-definite matrices.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</span></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Optimal solution if found, otherwise <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>NoSolverSelected</strong> – If the <code class="docutils literal notranslate"><span class="pre">solver</span></code> keyword argument is not set.</p></li>
<li><p><strong>ParamError</strong> – If any solver parameter is incorrect.</p></li>
<li><p><strong>ProblemError</strong> – If the problem is not correctly defined. For instance, if the solver
    requires a definite cost matrix but the provided matrix <span class="math notranslate nohighlight">\(P\)</span> is
    not.</p></li>
<li><p><strong>SolverError</strong> – If the solver failed during its execution.</p></li>
<li><p><strong>SolverNotFound</strong> – If the requested solver is not in <a class="reference internal" href="supported-solvers.html#qpsolvers.available_solvers" title="qpsolvers.available_solvers"><code class="xref py py-data docutils literal notranslate"><span class="pre">qpsolvers.available_solvers</span></code></a>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Extra keyword arguments given to this function are forwarded to the
underlying solver. For example, we can call OSQP with a custom absolute
feasibility tolerance by <code class="docutils literal notranslate"><span class="pre">solve_qp(P,</span> <span class="pre">q,</span> <span class="pre">G,</span> <span class="pre">h,</span> <span class="pre">solver='osqp',</span>
<span class="pre">eps_abs=1e-6)</span></code>. See the <a class="reference internal" href="supported-solvers.html#supported-solvers"><span class="std std-ref">Supported solvers</span></a> page
for details on the parameters available to each solver.</p>
<p>There is no guarantee that a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> is raised if the provided
problem is non-convex, as some solvers don’t check for this. Rather, if the
problem is non-convex and the solver fails because of that, then a
<code class="docutils literal notranslate"><span class="pre">ValueError</span></code> will be raised.</p>
</dd></dl>

<p>See the <code class="docutils literal notranslate"><span class="pre">examples/</span></code> folder in the repository for more use cases. For a more
general introduction you can also check out this post on <a class="reference external" href="https://scaron.info/blog/quadratic-programming-in-python.html">quadratic programming
in Python</a>.</p>
</section>
<section id="problem-class">
<h2>Problem class<a class="headerlink" href="#problem-class" title="Link to this heading">¶</a></h2>
<p>Alternatively, we can define the matrices and vectors using the <a class="reference internal" href="#qpsolvers.problem.Problem" title="qpsolvers.problem.Problem"><code class="xref py py-class docutils literal notranslate"><span class="pre">Problem</span></code></a> class:</p>
<dl class="py class">
<dt class="sig sig-object py" id="qpsolvers.problem.Problem">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">qpsolvers.problem.</span></span><span class="sig-name descname"><span class="pre">Problem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">P</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">G</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">h</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">A</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ub</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qpsolvers.problem.Problem" title="Link to this definition">¶</a></dt>
<dd><p>Data structure describing a quadratic program.</p>
<p>The quadratic program is defined as:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\begin{split}\begin{split}\begin{array}{ll}
    \underset{x}{\mbox{minimize}} &amp;
        \frac{1}{2} x^T P x + q^T x \\
    \mbox{subject to}
        &amp; G x \leq h                \\
        &amp; A x = b                    \\
        &amp; lb \leq x \leq ub
\end{array}\end{split}\end{split}\]</div>
</div>
<p>This class provides sanity checks and metrics such as the condition number
of a problem.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="qpsolvers.problem.Problem.P">
<span class="sig-name descname"><span class="pre">P</span></span><a class="headerlink" href="#qpsolvers.problem.Problem.P" title="Link to this definition">¶</a></dt>
<dd><p>Symmetric cost matrix (most solvers require it to be definite
as well).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="qpsolvers.problem.Problem.q">
<span class="sig-name descname"><span class="pre">q</span></span><a class="headerlink" href="#qpsolvers.problem.Problem.q" title="Link to this definition">¶</a></dt>
<dd><p>Cost vector.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="qpsolvers.problem.Problem.G">
<span class="sig-name descname"><span class="pre">G</span></span><a class="headerlink" href="#qpsolvers.problem.Problem.G" title="Link to this definition">¶</a></dt>
<dd><p>Linear inequality matrix.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="qpsolvers.problem.Problem.h">
<span class="sig-name descname"><span class="pre">h</span></span><a class="headerlink" href="#qpsolvers.problem.Problem.h" title="Link to this definition">¶</a></dt>
<dd><p>Linear inequality vector.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="qpsolvers.problem.Problem.A">
<span class="sig-name descname"><span class="pre">A</span></span><a class="headerlink" href="#qpsolvers.problem.Problem.A" title="Link to this definition">¶</a></dt>
<dd><p>Linear equality matrix.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="qpsolvers.problem.Problem.b">
<span class="sig-name descname"><span class="pre">b</span></span><a class="headerlink" href="#qpsolvers.problem.Problem.b" title="Link to this definition">¶</a></dt>
<dd><p>Linear equality vector.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="qpsolvers.problem.Problem.lb">
<span class="sig-name descname"><span class="pre">lb</span></span><a class="headerlink" href="#qpsolvers.problem.Problem.lb" title="Link to this definition">¶</a></dt>
<dd><p>Lower bound constraint vector. Can contain <code class="docutils literal notranslate"><span class="pre">-np.inf</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="qpsolvers.problem.Problem.ub">
<span class="sig-name descname"><span class="pre">ub</span></span><a class="headerlink" href="#qpsolvers.problem.Problem.ub" title="Link to this definition">¶</a></dt>
<dd><p>Upper bound constraint vector. Can contain <code class="docutils literal notranslate"><span class="pre">+np.inf</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qpsolvers.problem.Problem.check_constraints">
<span class="sig-name descname"><span class="pre">check_constraints</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#qpsolvers.problem.Problem.check_constraints" title="Link to this definition">¶</a></dt>
<dd><p>Check that problem constraints are properly specified.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ProblemError</strong> – If the constraints are not properly defined.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qpsolvers.problem.Problem.cond">
<span class="sig-name descname"><span class="pre">cond</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">active_set</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qpsolvers.problem.Problem.cond" title="Link to this definition">¶</a></dt>
<dd><p>Condition number of the problem matrix.</p>
<p>Compute the condition number of the symmetric matrix representing the
problem data:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\begin{split}M =
\begin{bmatrix}
    P &amp; G_{act}^T &amp; A_{act}^T \\
    G_{act} &amp; 0 &amp; 0 \\
    A_{act} &amp; 0 &amp; 0
\end{bmatrix}\end{split}\]</div>
</div>
<p>where <span class="math notranslate nohighlight">\(G_{act}\)</span> and <span class="math notranslate nohighlight">\(A_{act}\)</span> denote the active inequality
and equality constraints at the optimum of the problem.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>active_set</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">ActiveSet</span></code></span>) – Active set to evaluate the condition number with. It should contain
the set of active constraints at the optimum of the problem.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Condition number of the problem.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ProblemError :</strong> – If the problem is sparse.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Having a low condition number (say, less than 1e10) condition number is
strongly tied to the capacity of numerical solvers to solve a problem.
This is the motivation for preconditioning, as detailed for instance in
Section 5 of <a class="reference internal" href="references.html#stellato2020" id="id2"><span>[Stellato2020]</span></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qpsolvers.problem.Problem.get_cute_classification">
<span class="sig-name descname"><span class="pre">get_cute_classification</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">interest</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qpsolvers.problem.Problem.get_cute_classification" title="Link to this definition">¶</a></dt>
<dd><p>Get the CUTE classification string of the problem.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>interest</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>) – Either ‘A’, ‘M’ or ‘R’: ‘A’ if the problem is academic, that is,
has been constructed specifically by researchers to test one or
more algorithms; ‘M’ if the problem is part of a modelling exercise
where the actual value of the solution is not used in a genuine
practical application; and ‘R’ if the problem’s solution is (or has
been) actually used in a real application for purposes other than
testing algorithms.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>CUTE classification string of the problem</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Check out the <a class="reference external" href="https://www.cuter.rl.ac.uk//Problems/classification.shtml">CUTE classification scheme</a> for
details.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="qpsolvers.problem.Problem.has_sparse">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">has_sparse</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#qpsolvers.problem.Problem.has_sparse" title="Link to this definition">¶</a></dt>
<dd><p>Check whether the problem has sparse matrices.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if at least one of the <span class="math notranslate nohighlight">\(P\)</span>, <span class="math notranslate nohighlight">\(G\)</span> or <span class="math notranslate nohighlight">\(A\)</span>
matrices is sparse.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="qpsolvers.problem.Problem.is_unconstrained">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_unconstrained</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#qpsolvers.problem.Problem.is_unconstrained" title="Link to this definition">¶</a></dt>
<dd><p>Check whether the problem has any constraint.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if the problem has at least one constraint.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qpsolvers.problem.Problem.load">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qpsolvers.problem.Problem.load" title="Link to this definition">¶</a></dt>
<dd><p>Load problem from a NumPy file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file</strong> (<em>file-like object</em><em>, </em><em>string</em><em>, or </em><em>pathlib.Path</em>) – The file to read. File-like objects must support the
<code class="docutils literal notranslate"><span class="pre">seek()</span></code> and <code class="docutils literal notranslate"><span class="pre">read()</span></code> methods and must always
be opened in binary mode.  Pickled files require that the
file-like object support the <code class="docutils literal notranslate"><span class="pre">readline()</span></code> method as well.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qpsolvers.problem.Problem.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qpsolvers.problem.Problem.save" title="Link to this definition">¶</a></dt>
<dd><p>Save problem to a compressed NumPy file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file</strong> (<em>str</em><em> or </em><em>file</em>) – Either the filename (string) or an open file (file-like object)
where the data will be saved. If file is a string or a Path, the
<code class="docutils literal notranslate"><span class="pre">.npz</span></code> extension will be appended to the filename if it is not
already there.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qpsolvers.problem.Problem.unpack">
<span class="sig-name descname"><span class="pre">unpack</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#qpsolvers.problem.Problem.unpack" title="Link to this definition">¶</a></dt>
<dd><p>Get problem matrices as a tuple.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">csc_matrix</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">csc_matrix</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">csc_matrix</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</span></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple <code class="docutils literal notranslate"><span class="pre">(P,</span> <span class="pre">q,</span> <span class="pre">G,</span> <span class="pre">h,</span> <span class="pre">A,</span> <span class="pre">b,</span> <span class="pre">lb,</span> <span class="pre">ub)</span></code> of problem matrices.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<p>The solve function corresponding to <a class="reference internal" href="#qpsolvers.problem.Problem" title="qpsolvers.problem.Problem"><code class="xref py py-class docutils literal notranslate"><span class="pre">Problem</span></code></a> is <a class="reference internal" href="#qpsolvers.solve_problem" title="qpsolvers.solve_problem"><code class="xref py py-func docutils literal notranslate"><span class="pre">solve_problem()</span></code></a>
rather than <a class="reference internal" href="#qpsolvers.solve_qp" title="qpsolvers.solve_qp"><code class="xref py py-func docutils literal notranslate"><span class="pre">solve_qp()</span></code></a>.</p>
</section>
<section id="dual-multipliers">
<h2>Dual multipliers<a class="headerlink" href="#dual-multipliers" title="Link to this heading">¶</a></h2>
<p>The dual of the quadratic program defined above can be written as:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\begin{split}\begin{split}\begin{array}{ll}
\underset{x, z, y, z_{\mathit{box}}}{\mbox{maximize}} &amp;
    -\frac{1}{2} x^T P x - h^T z - b^T y
    - lb^T z_{\mathit{box}}^- - ub^T z_{\mathit{box}}^+ \\
\mbox{subject to}
    &amp; P x + G^T z + A^T y + z_{\mathit{box}} + q = 0 \\
    &amp; z \geq 0
\end{array}\end{split}\end{split}\]</div>
</div>
<p>were <span class="math notranslate nohighlight">\(v^- = \min(v, 0)\)</span> and <span class="math notranslate nohighlight">\(v^+ = \max(v, 0)\)</span>. To solve both a
problem and its dual, getting a full primal-dual solution <span class="math notranslate nohighlight">\((x^*, z^*,
y^*, z_\mathit{box}^*)\)</span>, build a <a class="reference internal" href="#qpsolvers.problem.Problem" title="qpsolvers.problem.Problem"><code class="xref py py-class docutils literal notranslate"><span class="pre">Problem</span></code></a> and call the
<a class="reference internal" href="#qpsolvers.solve_problem" title="qpsolvers.solve_problem"><code class="xref py py-func docutils literal notranslate"><span class="pre">solve_problem()</span></code></a> function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qpsolvers</span><span class="w"> </span><span class="kn">import</span> <span class="n">Problem</span><span class="p">,</span> <span class="n">solve_problem</span>

<span class="n">M</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">8.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">]])</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">M</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>  <span class="c1"># quick way to build a symmetric matrix</span>
<span class="n">q</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">3.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">])</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">M</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,))</span>
<span class="n">G</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.</span><span class="p">]])</span>
<span class="n">h</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">3.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.</span><span class="p">])</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,))</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">])</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.</span><span class="p">])</span>
<span class="n">lb</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.6</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">ub</span> <span class="o">=</span> <span class="o">+</span><span class="mf">0.7</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="n">problem</span> <span class="o">=</span> <span class="n">Problem</span><span class="p">(</span><span class="n">P</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">G</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">)</span>
<span class="n">solution</span> <span class="o">=</span> <span class="n">solve_problem</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="s2">&quot;proxqp&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Primal: x = </span><span class="si">{</span><span class="n">solution</span><span class="o">.</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Dual (Gx &lt;= h): z = </span><span class="si">{</span><span class="n">solution</span><span class="o">.</span><span class="n">z</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Dual (Ax == b): y = </span><span class="si">{</span><span class="n">solution</span><span class="o">.</span><span class="n">y</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Dual (lb &lt;= x &lt;= ub): z_box = </span><span class="si">{</span><span class="n">solution</span><span class="o">.</span><span class="n">z_box</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The function returns a <a class="reference internal" href="#qpsolvers.solution.Solution" title="qpsolvers.solution.Solution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Solution</span></code></a> with both primal and dual vectors. This example outputs the following solution:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Primal</span><span class="p">:</span> <span class="n">x</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">0.63333169</span> <span class="o">-</span><span class="mf">0.33333307</span>  <span class="mf">0.70000137</span><span class="p">]</span>
<span class="n">Dual</span> <span class="p">(</span><span class="n">Gx</span> <span class="o">&lt;=</span> <span class="n">h</span><span class="p">):</span> <span class="n">z</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.</span>         <span class="mf">0.</span>         <span class="mf">7.66660538</span><span class="p">]</span>
<span class="n">Dual</span> <span class="p">(</span><span class="n">Ax</span> <span class="o">==</span> <span class="n">b</span><span class="p">):</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">16.63326017</span><span class="p">]</span>
<span class="n">Dual</span> <span class="p">(</span><span class="n">lb</span> <span class="o">&lt;=</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">ub</span><span class="p">):</span> <span class="n">z_box</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">0.</span>          <span class="mf">0.</span>         <span class="mf">26.26649724</span><span class="p">]</span>
</pre></div>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="qpsolvers.solve_problem">
<span class="sig-prename descclassname"><span class="pre">qpsolvers.</span></span><span class="sig-name descname"><span class="pre">solve_problem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">problem</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solver</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initvals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qpsolvers.solve_problem" title="Link to this definition">¶</a></dt>
<dd><p>Solve a quadratic program using a given solver.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>problem</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="#qpsolvers.problem.Problem" title="qpsolvers.problem.Problem"><code class="xref py py-class docutils literal notranslate"><span class="pre">Problem</span></code></a></span>) – Quadratic program to solve.</p></li>
<li><p><strong>solver</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>) – Name of the solver, to choose in <a class="reference internal" href="supported-solvers.html#qpsolvers.available_solvers" title="qpsolvers.available_solvers"><code class="xref py py-data docutils literal notranslate"><span class="pre">qpsolvers.available_solvers</span></code></a>.</p></li>
<li><p><strong>initvals</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</span>) – Primal candidate vector <span class="math notranslate nohighlight">\(x\)</span> values used to warm-start the solver.</p></li>
<li><p><strong>verbose</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></span>) – Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to print out extra information.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In quadratic programming, the matrix <span class="math notranslate nohighlight">\(P\)</span> should be symmetric. Many
solvers (including CVXOPT, OSQP and quadprog) assume this is the case and
may return unintended results when the provided matrix is not. Thus, make
sure you matrix is indeed symmetric before calling this function, for
instance by projecting it on its symmetric part <span class="math notranslate nohighlight">\(S = \frac{1}{2} (P
+ P^T)\)</span>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="#qpsolvers.solution.Solution" title="qpsolvers.solution.Solution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Solution</span></code></a></span></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Solution found by the solver, if any, along with solver-specific return
values.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>SolverNotFound</strong> – If the requested solver is not in <a class="reference internal" href="supported-solvers.html#qpsolvers.available_solvers" title="qpsolvers.available_solvers"><code class="xref py py-data docutils literal notranslate"><span class="pre">qpsolvers.available_solvers</span></code></a>.</p></li>
<li><p><strong>ValueError</strong> – If the problem is not correctly defined. For instance, if the solver
    requires a definite cost matrix but the provided matrix <span class="math notranslate nohighlight">\(P\)</span> is
    not.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Extra keyword arguments given to this function are forwarded to the
underlying solver. For example, we can call OSQP with a custom absolute
feasibility tolerance by <code class="docutils literal notranslate"><span class="pre">solve_problem(problem,</span> <span class="pre">solver='osqp',</span>
<span class="pre">eps_abs=1e-6)</span></code>. See the <a class="reference internal" href="supported-solvers.html#supported-solvers"><span class="std std-ref">Supported solvers</span></a> page
for details on the parameters available to each solver.</p>
<p>There is no guarantee that a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> is raised if the provided
problem is non-convex, as some solvers don’t check for this. Rather, if the
problem is non-convex and the solver fails because of that, then a
<code class="docutils literal notranslate"><span class="pre">ValueError</span></code> will be raised.</p>
</dd></dl>

<p>See the <code class="docutils literal notranslate"><span class="pre">examples/</span></code> folder in the repository for more use cases. For an
introduction to dual multipliers you can also check out this post on
<a class="reference external" href="https://scaron.info/blog/optimality-conditions-and-numerical-tolerances-in-qp-solvers.html">optimality conditions and numerical tolerances in QP solvers</a>.</p>
</section>
<section id="optimality-of-a-solution">
<h2>Optimality of a solution<a class="headerlink" href="#optimality-of-a-solution" title="Link to this heading">¶</a></h2>
<p>The <a class="reference internal" href="#qpsolvers.solution.Solution" title="qpsolvers.solution.Solution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Solution</span></code></a> class describes the solution found by a solver to a
given problem. It is linked to the corresponding <a class="reference internal" href="#qpsolvers.problem.Problem" title="qpsolvers.problem.Problem"><code class="xref py py-class docutils literal notranslate"><span class="pre">Problem</span></code></a>, which it
can use for instance to check residuals. We can for instance check the
optimality of the solution returned by a solver with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qpsolvers</span><span class="w"> </span><span class="kn">import</span> <span class="n">Problem</span><span class="p">,</span> <span class="n">solve_problem</span>

<span class="n">M</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">8.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">]])</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">M</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>  <span class="c1"># quick way to build a symmetric matrix</span>
<span class="n">q</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">3.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">])</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">M</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,))</span>
<span class="n">G</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.</span><span class="p">]])</span>
<span class="n">h</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">3.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.</span><span class="p">])</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,))</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">])</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.</span><span class="p">])</span>
<span class="n">lb</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.6</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">ub</span> <span class="o">=</span> <span class="o">+</span><span class="mf">0.7</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="n">problem</span> <span class="o">=</span> <span class="n">Problem</span><span class="p">(</span><span class="n">P</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">G</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">)</span>
<span class="n">solution</span> <span class="o">=</span> <span class="n">solve_problem</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="s2">&quot;qpalm&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;- Solution is</span><span class="si">{</span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">solution</span><span class="o">.</span><span class="n">is_optimal</span><span class="p">(</span><span class="mf">1e-8</span><span class="p">)</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39; NOT&#39;</span><span class="si">}</span><span class="s2"> optimal&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;- Primal residual: </span><span class="si">{</span><span class="n">solution</span><span class="o">.</span><span class="n">primal_residual</span><span class="p">()</span><span class="si">:</span><span class="s2">.1e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;- Dual residual: </span><span class="si">{</span><span class="n">solution</span><span class="o">.</span><span class="n">dual_residual</span><span class="p">()</span><span class="si">:</span><span class="s2">.1e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;- Duality gap: </span><span class="si">{</span><span class="n">solution</span><span class="o">.</span><span class="n">duality_gap</span><span class="p">()</span><span class="si">:</span><span class="s2">.1e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This example prints:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">Solution</span> <span class="ow">is</span> <span class="n">optimal</span>
<span class="o">-</span> <span class="n">Primal</span> <span class="n">residual</span><span class="p">:</span> <span class="mf">1.1e-16</span>
<span class="o">-</span> <span class="n">Dual</span> <span class="n">residual</span><span class="p">:</span> <span class="mf">1.4e-14</span>
<span class="o">-</span> <span class="n">Duality</span> <span class="n">gap</span><span class="p">:</span> <span class="mf">0.0e+00</span>
</pre></div>
</div>
<p>You can check out <a class="reference internal" href="references.html#caron2022" id="id3"><span>[Caron2022]</span></a> for an overview of optimality conditions and why
a solution is optimal if and only if these three residuals are zero.</p>
<dl class="py class">
<dt class="sig sig-object py" id="qpsolvers.solution.Solution">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">qpsolvers.solution.</span></span><span class="sig-name descname"><span class="pre">Solution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">problem</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extras=&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">found=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z_box=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qpsolvers.solution.Solution" title="Link to this definition">¶</a></dt>
<dd><p>Solution returned by a QP solver for a given problem.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="qpsolvers.solution.Solution.extras">
<span class="sig-name descname"><span class="pre">extras</span></span><a class="headerlink" href="#qpsolvers.solution.Solution.extras" title="Link to this definition">¶</a></dt>
<dd><p>Other outputs, specific to each solver.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="qpsolvers.solution.Solution.found">
<span class="sig-name descname"><span class="pre">found</span></span><a class="headerlink" href="#qpsolvers.solution.Solution.found" title="Link to this definition">¶</a></dt>
<dd><p>True if the solution was found successfully by a solver, False if the
solver did not find a solution or detected an unfeasible problem,
<code class="docutils literal notranslate"><span class="pre">None</span></code> if no solver was run.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="qpsolvers.solution.Solution.problem">
<span class="sig-name descname"><span class="pre">problem</span></span><a class="headerlink" href="#qpsolvers.solution.Solution.problem" title="Link to this definition">¶</a></dt>
<dd><p>Quadratic program the solution corresponds to.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="qpsolvers.solution.Solution.obj">
<span class="sig-name descname"><span class="pre">obj</span></span><a class="headerlink" href="#qpsolvers.solution.Solution.obj" title="Link to this definition">¶</a></dt>
<dd><p>Value of the primal objective at the solution (<code class="docutils literal notranslate"><span class="pre">None</span></code> if no solution
was found).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="qpsolvers.solution.Solution.x">
<span class="sig-name descname"><span class="pre">x</span></span><a class="headerlink" href="#qpsolvers.solution.Solution.x" title="Link to this definition">¶</a></dt>
<dd><p>Solution vector for the primal quadratic program (<code class="docutils literal notranslate"><span class="pre">None</span></code> if no
solution was found).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="qpsolvers.solution.Solution.y">
<span class="sig-name descname"><span class="pre">y</span></span><a class="headerlink" href="#qpsolvers.solution.Solution.y" title="Link to this definition">¶</a></dt>
<dd><p>Dual multipliers for equality constraints (<code class="docutils literal notranslate"><span class="pre">None</span></code> if no solution was
found, or if there is no equality constraint). The dimension of
<span class="math notranslate nohighlight">\(y\)</span> is equal to the number of equality constraints. The values
<span class="math notranslate nohighlight">\(y_i\)</span> can be either positive or negative.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="qpsolvers.solution.Solution.z">
<span class="sig-name descname"><span class="pre">z</span></span><a class="headerlink" href="#qpsolvers.solution.Solution.z" title="Link to this definition">¶</a></dt>
<dd><p>Dual multipliers for linear inequality constraints (<code class="docutils literal notranslate"><span class="pre">None</span></code> if no
solution was found, or if there is no inequality constraint). The
dimension of <span class="math notranslate nohighlight">\(z\)</span> is equal to the number of inequalities. The
value <span class="math notranslate nohighlight">\(z_i\)</span> for inequality <span class="math notranslate nohighlight">\(i\)</span> is always positive.</p>
<ul class="simple">
<li><p>If <span class="math notranslate nohighlight">\(z_i &gt; 0\)</span>, the inequality is active at the solution:
<span class="math notranslate nohighlight">\(G_i x = h_i\)</span>.</p></li>
<li><p>If <span class="math notranslate nohighlight">\(z_i = 0\)</span>, the inequality is inactive at the solution:
<span class="math notranslate nohighlight">\(G_i x &lt; h_i\)</span>.</p></li>
</ul>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="qpsolvers.solution.Solution.z_box">
<span class="sig-name descname"><span class="pre">z_box</span></span><a class="headerlink" href="#qpsolvers.solution.Solution.z_box" title="Link to this definition">¶</a></dt>
<dd><p>Dual multipliers for box inequality constraints (<code class="docutils literal notranslate"><span class="pre">None</span></code> if no
solution was found, or if there is no box inequality). The sign of
<span class="math notranslate nohighlight">\(z_{box,i}\)</span> depends on the active bound:</p>
<ul class="simple">
<li><p>If <span class="math notranslate nohighlight">\(z_{box,i} &lt; 0\)</span>, then the lower bound <span class="math notranslate nohighlight">\(lb_i = x_i\)</span> is
active at the solution.</p></li>
<li><p>If <span class="math notranslate nohighlight">\(z_{box,i} = 0\)</span>, then neither the lower nor the upper bound
are active and <span class="math notranslate nohighlight">\(lb_i &lt; x_i &lt; ub_i\)</span>.</p></li>
<li><p>If <span class="math notranslate nohighlight">\(z_{box,i} &gt; 0\)</span>, then the upper bound <span class="math notranslate nohighlight">\(x_i = ub_i\)</span> is
active at the solution.</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qpsolvers.solution.Solution.dual_residual">
<span class="sig-name descname"><span class="pre">dual_residual</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#qpsolvers.solution.Solution.dual_residual" title="Link to this definition">¶</a></dt>
<dd><p>Compute the dual residual of the solution.</p>
<p>The dual residual is:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[r_d := \| P x + q + A^T y + G^T z + z_{box} \|_\infty\]</div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></span></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dual residual if it is defined, <code class="docutils literal notranslate"><span class="pre">np.inf</span></code> otherwise.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>See for instance <a class="reference internal" href="references.html#caron2022" id="id4"><span>[Caron2022]</span></a> for an overview of optimality conditions
and why this residual will be zero at the optimum.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qpsolvers.solution.Solution.duality_gap">
<span class="sig-name descname"><span class="pre">duality_gap</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#qpsolvers.solution.Solution.duality_gap" title="Link to this definition">¶</a></dt>
<dd><p>Compute the duality gap of the solution.</p>
<p>The duality gap is:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[r_g := | x^T P x + q^T x + b^T y + h^T z +
lb^T z_{box}^- + ub^T z_{box}^+ |\]</div>
</div>
<p>were <span class="math notranslate nohighlight">\(v^- = \min(v, 0)\)</span> and <span class="math notranslate nohighlight">\(v^+ = \max(v, 0)\)</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></span></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Duality gap if it is defined, <code class="docutils literal notranslate"><span class="pre">np.inf</span></code> otherwise.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>See for instance <a class="reference internal" href="references.html#caron2022" id="id5"><span>[Caron2022]</span></a> for an overview of optimality conditions
and why this gap will be zero at the optimum.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qpsolvers.solution.Solution.is_optimal">
<span class="sig-name descname"><span class="pre">is_optimal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eps_abs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qpsolvers.solution.Solution.is_optimal" title="Link to this definition">¶</a></dt>
<dd><p>Check whether the solution is indeed optimal.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>eps_abs</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></span>) – Absolute tolerance for the primal residual, dual residual and
duality gap.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></span></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>See for instance <a class="reference internal" href="references.html#caron2022" id="id6"><span>[Caron2022]</span></a> for an overview of optimality conditions
in quadratic programming.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qpsolvers.solution.Solution.primal_residual">
<span class="sig-name descname"><span class="pre">primal_residual</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#qpsolvers.solution.Solution.primal_residual" title="Link to this definition">¶</a></dt>
<dd><p>Compute the primal residual of the solution.</p>
<p>The primal residual is:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[r_p := \max(\| A x - b \|_\infty, [G x - h]^+,
[lb - x]^+, [x - ub]^+)\]</div>
</div>
<p>were <span class="math notranslate nohighlight">\(v^- = \min(v, 0)\)</span> and <span class="math notranslate nohighlight">\(v^+ = \max(v, 0)\)</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></span></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Primal residual if it is defined, <code class="docutils literal notranslate"><span class="pre">np.inf</span></code> otherwise.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>See for instance <a class="reference internal" href="references.html#caron2022" id="id7"><span>[Caron2022]</span></a> for an overview of optimality conditions
and why this residual will be zero at the optimum.</p>
</dd></dl>

</dd></dl>

</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="least-squares.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Least squares</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="installation.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Installation</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2016-2024 Stéphane Caron and the qpsolvers contributors
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Quadratic programming</a><ul>
<li><a class="reference internal" href="#primal-problem">Primal problem</a><ul>
<li><a class="reference internal" href="#qpsolvers.solve_qp"><code class="docutils literal notranslate"><span class="pre">solve_qp()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#problem-class">Problem class</a><ul>
<li><a class="reference internal" href="#qpsolvers.problem.Problem"><code class="docutils literal notranslate"><span class="pre">Problem</span></code></a><ul>
<li><a class="reference internal" href="#qpsolvers.problem.Problem.P"><code class="docutils literal notranslate"><span class="pre">Problem.P</span></code></a></li>
<li><a class="reference internal" href="#qpsolvers.problem.Problem.q"><code class="docutils literal notranslate"><span class="pre">Problem.q</span></code></a></li>
<li><a class="reference internal" href="#qpsolvers.problem.Problem.G"><code class="docutils literal notranslate"><span class="pre">Problem.G</span></code></a></li>
<li><a class="reference internal" href="#qpsolvers.problem.Problem.h"><code class="docutils literal notranslate"><span class="pre">Problem.h</span></code></a></li>
<li><a class="reference internal" href="#qpsolvers.problem.Problem.A"><code class="docutils literal notranslate"><span class="pre">Problem.A</span></code></a></li>
<li><a class="reference internal" href="#qpsolvers.problem.Problem.b"><code class="docutils literal notranslate"><span class="pre">Problem.b</span></code></a></li>
<li><a class="reference internal" href="#qpsolvers.problem.Problem.lb"><code class="docutils literal notranslate"><span class="pre">Problem.lb</span></code></a></li>
<li><a class="reference internal" href="#qpsolvers.problem.Problem.ub"><code class="docutils literal notranslate"><span class="pre">Problem.ub</span></code></a></li>
<li><a class="reference internal" href="#qpsolvers.problem.Problem.check_constraints"><code class="docutils literal notranslate"><span class="pre">Problem.check_constraints()</span></code></a></li>
<li><a class="reference internal" href="#qpsolvers.problem.Problem.cond"><code class="docutils literal notranslate"><span class="pre">Problem.cond()</span></code></a></li>
<li><a class="reference internal" href="#qpsolvers.problem.Problem.get_cute_classification"><code class="docutils literal notranslate"><span class="pre">Problem.get_cute_classification()</span></code></a></li>
<li><a class="reference internal" href="#qpsolvers.problem.Problem.has_sparse"><code class="docutils literal notranslate"><span class="pre">Problem.has_sparse</span></code></a></li>
<li><a class="reference internal" href="#qpsolvers.problem.Problem.is_unconstrained"><code class="docutils literal notranslate"><span class="pre">Problem.is_unconstrained</span></code></a></li>
<li><a class="reference internal" href="#qpsolvers.problem.Problem.load"><code class="docutils literal notranslate"><span class="pre">Problem.load()</span></code></a></li>
<li><a class="reference internal" href="#qpsolvers.problem.Problem.save"><code class="docutils literal notranslate"><span class="pre">Problem.save()</span></code></a></li>
<li><a class="reference internal" href="#qpsolvers.problem.Problem.unpack"><code class="docutils literal notranslate"><span class="pre">Problem.unpack()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#dual-multipliers">Dual multipliers</a><ul>
<li><a class="reference internal" href="#qpsolvers.solve_problem"><code class="docutils literal notranslate"><span class="pre">solve_problem()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#optimality-of-a-solution">Optimality of a solution</a><ul>
<li><a class="reference internal" href="#qpsolvers.solution.Solution"><code class="docutils literal notranslate"><span class="pre">Solution</span></code></a><ul>
<li><a class="reference internal" href="#qpsolvers.solution.Solution.extras"><code class="docutils literal notranslate"><span class="pre">Solution.extras</span></code></a></li>
<li><a class="reference internal" href="#qpsolvers.solution.Solution.found"><code class="docutils literal notranslate"><span class="pre">Solution.found</span></code></a></li>
<li><a class="reference internal" href="#qpsolvers.solution.Solution.problem"><code class="docutils literal notranslate"><span class="pre">Solution.problem</span></code></a></li>
<li><a class="reference internal" href="#qpsolvers.solution.Solution.obj"><code class="docutils literal notranslate"><span class="pre">Solution.obj</span></code></a></li>
<li><a class="reference internal" href="#qpsolvers.solution.Solution.x"><code class="docutils literal notranslate"><span class="pre">Solution.x</span></code></a></li>
<li><a class="reference internal" href="#qpsolvers.solution.Solution.y"><code class="docutils literal notranslate"><span class="pre">Solution.y</span></code></a></li>
<li><a class="reference internal" href="#qpsolvers.solution.Solution.z"><code class="docutils literal notranslate"><span class="pre">Solution.z</span></code></a></li>
<li><a class="reference internal" href="#qpsolvers.solution.Solution.z_box"><code class="docutils literal notranslate"><span class="pre">Solution.z_box</span></code></a></li>
<li><a class="reference internal" href="#qpsolvers.solution.Solution.dual_residual"><code class="docutils literal notranslate"><span class="pre">Solution.dual_residual()</span></code></a></li>
<li><a class="reference internal" href="#qpsolvers.solution.Solution.duality_gap"><code class="docutils literal notranslate"><span class="pre">Solution.duality_gap()</span></code></a></li>
<li><a class="reference internal" href="#qpsolvers.solution.Solution.is_optimal"><code class="docutils literal notranslate"><span class="pre">Solution.is_optimal()</span></code></a></li>
<li><a class="reference internal" href="#qpsolvers.solution.Solution.primal_residual"><code class="docutils literal notranslate"><span class="pre">Solution.primal_residual()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=0b4ca7ae"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=5fa4622c"></script>
    <script async="async" src="_static/mathjax/tex-chtml.js"></script>
    </body>
</html>